(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(122),c=n(0),r=n(34),i=n.n(r),s=n(124),l=n(56),d=n(13),u=n(20),j=n(8),b=n(22),p=n(5),O=n(123),h=n(113),m=n(114),f=n(115),g=n(47),x=n(117),v=n(125),k=n(84),w=n(88),y=function(){return{bg:Object(w.d)("white","black"),color:Object(w.d)("black","white"),heading:Object(w.d)("teal.600","teal.100")}},S=n(62),T=Object(S.a)({reducerPath:"todoApi",baseQuery:Object(S.b)({baseUrl:"https://api-nodejs-todolist.herokuapp.com",prepareHeaders:function(e,t){var n=t.getState,a=""===n().login.token?localStorage.getItem("token"):n().login.token;return a&&e.set("Authorization","Bearer ".concat(a)),e}}),entityTypes:["TODO"],endpoints:function(){return{}}}),C=T,L=n(48);function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Generic Assertion";if(!e)throw new Error("Assertion failed: ".concat(t))}var M=T.injectEndpoints({endpoints:function(e){return{login:e.mutation({query:function(e){return{url:"/user/login",method:"POST",body:e}},invalidates:["TODO"]}),signup:e.mutation({query:function(e){return{url:"/user/register",method:"POST",body:e}}}),userDetail:e.mutation({query:function(){return{url:"/user/me"}}})}}}),E=n(12),I=(Object(E.c)({selectId:function(e){return e.user._id}}),{token:"",user:{name:"",email:"",_id:0}}),F=Object(E.d)({name:"login",initialState:I,reducers:{logout:function(e){e.token="SIGNOUT",e.user=I.user,localStorage.setItem("token","SIGNOUT")}},extraReducers:function(e){e.addMatcher(M.endpoints.login.matchFulfilled,(function(e,t){var n=t.payload;e.token=n.result.token,e.user=n.result.user,localStorage.setItem("token",n.result.token)})).addMatcher(M.endpoints.login.matchRejected,(function(e,t){t.payload})).addMatcher(M.endpoints.userDetail.matchFulfilled,(function(e,t){var n=t.payload;e.user=n.result}))}}),z=F.actions.logout,P=F.reducer,_=function(e){return e.login.user},U=function(e){return""!==e.login.token?e.login.token:localStorage.getItem("token")},q=n(85),D=C.injectEndpoints({endpoints:function(e){return{getTask:e.mutation({query:function(){return{url:"/task"}}}),addTask:e.mutation({query:function(e){return{url:"/task",method:"POST",body:e}}}),updateTask:e.mutation({query:function(e){var t=e._id,n=Object(q.a)(e,["_id"]);return{url:"/task/".concat(t),method:"PUT",body:n}}}),deleteTask:e.mutation({query:function(e){var t=e._id;return{url:"/task/".concat(t),method:"DELETE"}}})}}}),N=Object(E.d)({name:"login",initialState:{count:0,data:[]},reducers:{},extraReducers:function(e){e.addMatcher(D.endpoints.getTask.matchFulfilled,(function(e,t){var n=t.payload;e.data=n.result.data,e.count=n.result.count})).addMatcher(D.endpoints.addTask.matchFulfilled,(function(e,t){var n=t.payload;e.data.push(n.result.data)})).addMatcher(D.endpoints.updateTask.matchFulfilled,(function(e,t){var n=t.payload,a=e.data.findIndex((function(e){return e._id===n.result.data._id}));a>-1&&(e.data[a]=n.result.data)})).addMatcher(D.endpoints.deleteTask.matchFulfilled,(function(e,t){var n=t.payload;console.log(n)}))}}).reducer,B=function(e){return e.task.data},G=n(18),R=function(e){var t;return Object(E.a)(Object(b.a)({reducer:(t={},Object(j.a)(t,C.reducerPath,C.reducer),Object(j.a)(t,"login",P),Object(j.a)(t,"task",N),t),middleware:function(e){return e().concat(C.middleware)}},e))}(),J=G.d;var W=n(119),H=n(118),Q=n(120);function X(){var e=y(),t=(e.bg,e.color,e.heading),n=(J(U),Object(O.a)()),o=D.endpoints.addTask.useMutation(),r=Object(p.a)(o,2),i=r[0],s=r[1].isLoading,l=Object(c.useState)({description:""}),d=Object(p.a)(l,2),u=d[0],m=d[1];return Object(a.jsxs)(h.a,{p:{base:5,md:9},children:[Object(a.jsx)(f.a,{fontSize:"3xl",color:t,children:"Add Task"}),Object(a.jsxs)(H.a,{children:[Object(a.jsxs)(g.a,{id:"email",mt:"4",children:[Object(a.jsx)(x.a,{children:"Task Name"}),Object(a.jsx)(v.a,{type:"email",name:"description",value:u.description,onChange:function(e){var t=e.target,n=t.name,a=t.value;return m((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n,a))}))}})]}),Object(a.jsx)(k.a,{colorScheme:"teal",mt:12,mx:{base:2,md:10},onClick:function(){i(u).then((function(e){e.error?n({title:"Failed to Add task",status:"error",duration:3e3,isClosable:!0}):(m({description:""}),n({title:"Task Added",status:"success",duration:3e3,isClosable:!0}))}))},children:s?"...loading":"Add"})]})]})}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var V=c.createElement("g",null,c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#FF4141",d:"M61.44,0c33.933,0,61.439,27.507,61.439,61.439 s-27.506,61.439-61.439,61.439C27.507,122.879,0,95.372,0,61.439S27.507,0,61.44,0L61.44,0z M73.451,39.151 c2.75-2.793,7.221-2.805,9.986-0.027c2.764,2.776,2.775,7.292,0.027,10.083L71.4,61.445l12.076,12.249 c2.729,2.77,2.689,7.257-0.08,10.022c-2.773,2.765-7.23,2.758-9.955-0.013L61.446,71.54L49.428,83.728 c-2.75,2.793-7.22,2.805-9.986,0.027c-2.763-2.776-2.776-7.293-0.027-10.084L51.48,61.434L39.403,49.185 c-2.728-2.769-2.689-7.256,0.082-10.022c2.772-2.765,7.229-2.758,9.953,0.013l11.997,12.165L73.451,39.151L73.451,39.151z"}));function Y(e,t){var n=e.title,a=e.titleId,o=K(e,["title","titleId"]);return c.createElement("svg",$({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25.879px",height:"25.879px",viewBox:"0 0 122.879 122.879",enableBackground:"new 0 0 122.879 122.879",xmlSpace:"preserve",ref:t,"aria-labelledby":a},o),n?c.createElement("title",{id:a},n):null,V)}var Z=c.forwardRef(Y);n.p;var ee=[{path:"/todoApp/signup",exact:!0,component:function(){var e,t=Object(d.f)().push,n=Object(O.a)(),o=Object(c.useState)({name:"",email:"",password:"",age:0}),r=Object(p.a)(o,2),i=r[0],s=r[1],l=y(),u=l.bg,w=(l.color,l.heading),S=function(e){var t=e.target,n=t.name,a=t.value;return s((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n,a))}))};A(null===(e=C.endpoints.login)||void 0===e?void 0:e.useMutation());var T=M.endpoints.signup.useMutation(),L=Object(p.a)(T,2),E=L[0];return L[1].isLoading,Object(a.jsx)(h.a,{textAlign:"center",fontSize:"xl",children:Object(a.jsx)(m.a,{templateColumns:"repeat(1, 1fr)",gap:5,children:Object(a.jsxs)(h.a,{w:"50%",bg:u,shadow:"md",px:20,py:10,mx:"auto",mt:"10%",children:[Object(a.jsx)(f.a,{fontSize:"3xl",color:w,children:"SignUp"}),Object(a.jsxs)(g.a,{id:"name",mt:"4",children:[Object(a.jsx)(x.a,{children:"Name"}),Object(a.jsx)(v.a,{type:"text",name:"name",value:i.name,onChange:S})]}),Object(a.jsxs)(g.a,{id:"email",mt:"4",children:[Object(a.jsx)(x.a,{children:"Email address"}),Object(a.jsx)(v.a,{type:"email",name:"email",value:i.email,onChange:S})]}),Object(a.jsxs)(g.a,{id:"password",mt:"5",children:[Object(a.jsx)(x.a,{children:"Password"}),Object(a.jsx)(v.a,{type:"password",name:"password",value:i.password,onChange:S})]}),Object(a.jsxs)(g.a,{id:"age",mt:"4",children:[Object(a.jsx)(x.a,{children:"Age"}),Object(a.jsx)(v.a,{type:"number",name:"age",value:i.age,onChange:S})]}),Object(a.jsx)(k.a,{colorScheme:"teal",mt:10,onClick:function(){E(i).then((function(e){e.error?n({title:"Failed to Signup",status:"error",duration:3e3,isClosable:!0}):t("/todoApp")}))},children:"Sign Up"})]})})})}},{path:"/todoApp/todo",exact:!0,component:function(){var e=y(),t=(e.bg,e.color,e.heading,J(U)),n=J(B),o=D.endpoints.getTask.useMutation(),r=Object(p.a)(o,2),i=r[0],s=(r[1].isLoading,D.endpoints.updateTask.useMutation()),l=Object(p.a)(s,2),d=l[0],u=(l[1].isLoading,D.endpoints.deleteTask.useMutation()),j=Object(p.a)(u,1)[0];return Object(c.useEffect)((function(){i()}),[t]),Object(a.jsx)(h.a,{fontSize:"xl",children:Object(a.jsxs)(h.a,{fontSize:"m",children:[Object(a.jsx)(X,{}),Object(a.jsx)(m.a,{templateColumns:"repeat(5, 1fr)",children:Object(a.jsx)(m.b,{colSpan:{base:5,md:3},p:9,children:Object(a.jsx)(W.a,{spacing:3,children:n.map((function(e,t){return Object(a.jsx)(W.b,{children:Object(a.jsxs)(H.a,{children:[Object(a.jsx)(f.a,{children:e.description}),Object(a.jsx)(Q.a,{}),Object(a.jsx)(k.a,{colorScheme:"teal",size:"xs",onClick:function(){return t=e._id,n=!e.completed,void d({_id:t,completed:n});var t,n},children:e.completed?"Completed":"Complete"}),Object(a.jsx)(h.a,{px:2,onClick:function(){return t=e._id,void j({_id:t}).then((function(){return i()}));var t},cursor:"pointer",children:Object(a.jsx)(Z,{})})]})},t)}))})})})]})})}},{path:"/todoApp",exact:!0,component:function(){var e,t=Object(d.f)().push,n=Object(O.a)(),o=J(U),r=Object(c.useState)({email:"",password:""}),i=Object(p.a)(r,2),s=i[0],l=i[1],u=y(),w=u.bg,S=(u.color,u.heading);Object(c.useEffect)((function(){"SIGNOUT"!==o&&t("/todoApp/todo")}),[o]);var T=function(e){var t=e.target,n=t.name,a=t.value;return l((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n,a))}))};A(null===(e=C.endpoints.login)||void 0===e?void 0:e.useMutation());var E=M.endpoints.login.useMutation(),I=Object(p.a)(E,2),F=I[0],z=I[1].isLoading;return Object(a.jsx)(h.a,{textAlign:"center",fontSize:"xl",children:Object(a.jsx)(m.a,{templateColumns:"repeat(1, 1fr)",gap:9,children:Object(a.jsxs)(h.a,{w:{sm:"95%",md:"50%"},bg:w,shadow:"md",px:{base:5,md:20},py:10,mx:"auto",mt:"10%",children:[Object(a.jsx)(f.a,{fontSize:"3xl",color:S,children:"Login"}),Object(a.jsxs)(g.a,{id:"email",mt:"4",children:[Object(a.jsx)(x.a,{children:"Email address"}),Object(a.jsx)(v.a,{type:"email",name:"email",value:s.email,onChange:T})]}),Object(a.jsxs)(g.a,{id:"password",mt:"5",children:[Object(a.jsx)(x.a,{children:"Password"}),Object(a.jsx)(v.a,{type:"password",name:"password",value:s.password,onChange:T})]}),Object(a.jsx)(k.a,{colorScheme:"teal",mt:10,onClick:function(){F(s).then((function(e){e.error?n({title:"Failed to Authenticate",description:"Incorrect email and password",status:"error",duration:3e3,isClosable:!0}):t("/todoApp/todo")}))},children:z?"...loading":"Login"}),Object(a.jsx)(f.a,{children:Object(a.jsx)(L.a,{to:"/todoApp/signup",children:"Sign Up"})})]})})})}}],te=n(126),ne=n(121),ae=n(66),oe=function(e){var t=Object(w.c)().toggleColorMode,n=Object(w.d)("dark","light"),o=Object(w.d)(ae.a,ae.b);return Object(a.jsx)(ne.a,Object(b.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(a.jsx)(o,{}),"aria-label":"Switch to ".concat(n," mode")},e))};function ce(){var e=y(),t=e.bg,n=(e.color,e.heading,Object(d.f)().push),o=Object(G.c)(),r=J(U),i=J(_),s=M.endpoints.userDetail.useMutation(),l=Object(p.a)(s,2),u=l[0];l[1].isLoading;Object(c.useEffect)((function(){"SIGNOUT"!==r&&u()}),[r]);return Object(a.jsx)(h.a,{bg:t,p:2,children:Object(a.jsxs)(te.a,{children:[Object(a.jsx)(Q.a,{}),Object(a.jsx)(oe,{justifySelf:"flex-end"}),Object(a.jsx)(f.a,{mx:4,children:i.name}),"SIGNOUT"!==r&&Object(a.jsx)(k.a,{colorScheme:"teal",onClick:function(){o(z()),n("/todoApp")},size:"sm",children:"Sign out"})]})})}var re=Object(u.a)(),ie=function(){return Object(a.jsx)(d.b,{history:re,children:Object(a.jsxs)(c.Suspense,{fallback:"...Loading",children:[Object(a.jsx)(d.a,{path:"*",component:ce}),Object(a.jsx)(d.c,{children:ee.map((function(e,t){return Object(a.jsx)(d.a,{exact:e.exact,path:e.path,component:e.component},t)}))})]})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(c.StrictMode,{children:Object(a.jsxs)(G.a,{store:R,children:[Object(a.jsx)(o.a,{}),Object(a.jsx)(s.a,{theme:l.b,children:Object(a.jsx)(ie,{})})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),se()}},[[103,1,2]]]);
//# sourceMappingURL=main.e5a779c2.chunk.js.map