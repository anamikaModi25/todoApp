(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(122),r=n(0),o=n(34),i=n.n(o),s=n(124),l=n(56),d=n(13),u=n(20),j=n(8),b=n(22),O=n(5),h=n(123),p=n(113),m=n(114),f=n(115),g=n(47),x=n(117),v=n(125),k=n(84),w=n(88),y=function(){return{bg:Object(w.d)("white","black"),color:Object(w.d)("black","white"),heading:Object(w.d)("teal.600","teal.100")}},S=n(62),T=Object(S.a)({reducerPath:"todoApi",baseQuery:Object(S.b)({baseUrl:"https://api-nodejs-todolist.herokuapp.com",prepareHeaders:function(e,t){var n=t.getState,a=""===n().login.token?localStorage.getItem("token"):n().login.token;return a&&e.set("Authorization","Bearer ".concat(a)),e}}),entityTypes:["TODO"],endpoints:function(){return{}}}),C=T,L=n(48);function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Generic Assertion";if(!e)throw new Error("Assertion failed: ".concat(t))}var E=T.injectEndpoints({endpoints:function(e){return{login:e.mutation({query:function(e){return{url:"/user/login",method:"POST",body:e}},invalidates:["TODO"]}),signup:e.mutation({query:function(e){return{url:"/user/register",method:"POST",body:e}}}),userDetail:e.mutation({query:function(){return{url:"/user/me"}}})}}}),I=n(12),z=(Object(I.c)({selectId:function(e){return e.user._id}}),{token:"",user:{name:"",email:"",_id:0}}),F=Object(I.d)({name:"login",initialState:z,reducers:{logout:function(e){e.token="SIGNOUT",e.user=z.user,localStorage.setItem("token","SIGNOUT")}},extraReducers:function(e){e.addMatcher(E.endpoints.login.matchFulfilled,(function(e,t){var n=t.payload;e.token=n.result.token,e.user=n.result.user,localStorage.setItem("token",n.result.token)})).addMatcher(E.endpoints.login.matchRejected,(function(e,t){t.payload})).addMatcher(E.endpoints.userDetail.matchFulfilled,(function(e,t){var n=t.payload;e.user=n.result}))}}),P=F.actions.logout,A=F.reducer,_=function(e){return e.login.user},U=function(e){return""!==e.login.token?e.login.token:localStorage.getItem("token")},q=n(85),D=C.injectEndpoints({endpoints:function(e){return{getTask:e.mutation({query:function(){return{url:"/task"}}}),addTask:e.mutation({query:function(e){return{url:"/task",method:"POST",body:e}}}),updateTask:e.mutation({query:function(e){var t=e._id,n=Object(q.a)(e,["_id"]);return{url:"/task/".concat(t),method:"PUT",body:n}}}),deleteTask:e.mutation({query:function(e){var t=e._id;return{url:"/task/".concat(t),method:"DELETE"}}})}}}),N=Object(I.d)({name:"login",initialState:{count:0,data:[]},reducers:{},extraReducers:function(e){e.addMatcher(D.endpoints.getTask.matchFulfilled,(function(e,t){var n=t.payload;e.data=n.result.data,e.count=n.result.count})).addMatcher(D.endpoints.addTask.matchFulfilled,(function(e,t){var n=t.payload;e.data.push(n.result.data)})).addMatcher(D.endpoints.updateTask.matchFulfilled,(function(e,t){var n=t.payload,a=e.data.findIndex((function(e){return e._id===n.result.data._id}));a>-1&&(e.data[a]=n.result.data)})).addMatcher(D.endpoints.deleteTask.matchFulfilled,(function(e,t){var n=t.payload;console.log(n)}))}}).reducer,B=function(e){return e.task.data},G=n(18),R=function(e){var t;return Object(I.a)(Object(b.a)({reducer:(t={},Object(j.a)(t,C.reducerPath,C.reducer),Object(j.a)(t,"login",A),Object(j.a)(t,"task",N),t),middleware:function(e){return e().concat(C.middleware)}},e))}(),J=G.d;var W=n(118),H=n(66),Q=function(e){var t=Object(w.c)().toggleColorMode,n=Object(w.d)("dark","light"),c=Object(w.d)(H.a,H.b);return Object(a.jsx)(W.a,Object(b.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(a.jsx)(c,{}),"aria-label":"Switch to ".concat(n," mode")},e))};var X=n(120),$=n(119),K=n(121);function V(){var e=y(),t=(e.bg,e.color,e.heading),n=(J(U),Object(h.a)()),c=D.endpoints.addTask.useMutation(),o=Object(O.a)(c,2),i=o[0],s=o[1].isLoading,l=Object(r.useState)({description:""}),d=Object(O.a)(l,2),u=d[0],m=d[1];return Object(a.jsxs)(p.a,{p:{base:5,md:9},children:[Object(a.jsx)(f.a,{fontSize:"3xl",color:t,children:"Add Task"}),Object(a.jsxs)($.a,{children:[Object(a.jsxs)(g.a,{id:"email",mt:"4",children:[Object(a.jsx)(x.a,{children:"Task Name"}),Object(a.jsx)(v.a,{type:"email",name:"description",value:u.description,onChange:function(e){var t=e.target,n=t.name,a=t.value;return m((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n,a))}))}})]}),Object(a.jsx)(k.a,{colorScheme:"teal",mt:12,mx:{base:2,md:10},onClick:function(){i(u).then((function(e){e.error?n({title:"Failed to Add task",status:"error",duration:3e3,isClosable:!0}):(m({description:""}),n({title:"Task Added",status:"success",duration:3e3,isClosable:!0}))}))},children:s?"...loading":"Add"})]})]})}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var ee=r.createElement("g",null,r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#FF4141",d:"M61.44,0c33.933,0,61.439,27.507,61.439,61.439 s-27.506,61.439-61.439,61.439C27.507,122.879,0,95.372,0,61.439S27.507,0,61.44,0L61.44,0z M73.451,39.151 c2.75-2.793,7.221-2.805,9.986-0.027c2.764,2.776,2.775,7.292,0.027,10.083L71.4,61.445l12.076,12.249 c2.729,2.77,2.689,7.257-0.08,10.022c-2.773,2.765-7.23,2.758-9.955-0.013L61.446,71.54L49.428,83.728 c-2.75,2.793-7.22,2.805-9.986,0.027c-2.763-2.776-2.776-7.293-0.027-10.084L51.48,61.434L39.403,49.185 c-2.728-2.769-2.689-7.256,0.082-10.022c2.772-2.765,7.229-2.758,9.953,0.013l11.997,12.165L73.451,39.151L73.451,39.151z"}));function te(e,t){var n=e.title,a=e.titleId,c=Z(e,["title","titleId"]);return r.createElement("svg",Y({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25.879px",height:"25.879px",viewBox:"0 0 122.879 122.879",enableBackground:"new 0 0 122.879 122.879",xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,ee)}var ne=r.forwardRef(te);n.p;var ae=[{path:"/signup",exact:!0,component:function(){var e,t=Object(d.f)().push,n=Object(r.useState)({name:"",email:"",password:"",age:0}),c=Object(O.a)(n,2),o=c[0],i=c[1],s=y(),l=s.bg,u=(s.color,s.heading),h=function(e){var t=e.target,n=t.name,a=t.value;return i((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n,a))}))};M(null===(e=C.endpoints.login)||void 0===e?void 0:e.useMutation());var w=E.endpoints.signup.useMutation(),S=Object(O.a)(w,2),T=S[0];return S[1].isLoading,Object(a.jsxs)(p.a,{textAlign:"center",fontSize:"xl",children:[Object(a.jsx)(Q,{justifySelf:"flex-end"}),Object(a.jsx)(m.a,{templateColumns:"repeat(1, 1fr)",gap:9,children:Object(a.jsxs)(p.a,{w:"50%",bg:l,shadow:"md",px:20,py:10,mx:"auto",mt:"10%",children:[Object(a.jsx)(f.a,{fontSize:"3xl",color:u,children:"SignUp"}),Object(a.jsxs)(g.a,{id:"name",mt:"4",children:[Object(a.jsx)(x.a,{children:"Name"}),Object(a.jsx)(v.a,{type:"text",name:"name",value:o.name,onChange:h})]}),Object(a.jsxs)(g.a,{id:"email",mt:"4",children:[Object(a.jsx)(x.a,{children:"Email address"}),Object(a.jsx)(v.a,{type:"email",name:"email",value:o.email,onChange:h})]}),Object(a.jsxs)(g.a,{id:"password",mt:"5",children:[Object(a.jsx)(x.a,{children:"Password"}),Object(a.jsx)(v.a,{type:"password",name:"password",value:o.password,onChange:h})]}),Object(a.jsxs)(g.a,{id:"age",mt:"4",children:[Object(a.jsx)(x.a,{children:"Age"}),Object(a.jsx)(v.a,{type:"number",name:"age",value:o.age,onChange:h})]}),Object(a.jsx)(k.a,{colorScheme:"teal",mt:10,onClick:function(){T(o).then((function(){return t("/")}))},children:"Sign Up"})]})})]})}},{path:"/todo",exact:!0,component:function(){var e=y(),t=(e.bg,e.color,e.heading,J(U)),n=J(B),c=D.endpoints.getTask.useMutation(),o=Object(O.a)(c,2),i=o[0],s=(o[1].isLoading,D.endpoints.updateTask.useMutation()),l=Object(O.a)(s,2),d=l[0],u=(l[1].isLoading,D.endpoints.deleteTask.useMutation()),j=Object(O.a)(u,1)[0];return Object(r.useEffect)((function(){i()}),[t]),Object(a.jsx)(p.a,{fontSize:"xl",children:Object(a.jsxs)(p.a,{fontSize:"m",children:[Object(a.jsx)(V,{}),Object(a.jsx)(m.a,{templateColumns:"repeat(5, 1fr)",children:Object(a.jsx)(m.b,{colSpan:{base:5,md:3},p:9,children:Object(a.jsx)(X.a,{spacing:3,children:n.map((function(e,t){return Object(a.jsx)(X.b,{children:Object(a.jsxs)($.a,{children:[Object(a.jsx)(f.a,{children:e.description}),Object(a.jsx)(K.a,{}),Object(a.jsx)(k.a,{colorScheme:"teal",size:"xs",onClick:function(){return t=e._id,n=!e.completed,void d({_id:t,completed:n});var t,n},children:e.completed?"Completed":"Complete"}),Object(a.jsx)(p.a,{px:2,onClick:function(){return t=e._id,void j({_id:t}).then((function(){return i()}));var t},cursor:"pointer",children:Object(a.jsx)(ne,{})})]})},t)}))})})})]})})}},{path:"/",exact:!0,component:function(){var e,t=Object(d.f)().push,n=Object(h.a)(),c=J(U),o=Object(r.useState)({email:"",password:""}),i=Object(O.a)(o,2),s=i[0],l=i[1],u=y(),w=u.bg,S=(u.color,u.heading);Object(r.useEffect)((function(){"SIGNOUT"!==c&&t("/todo")}),[c]);var T=function(e){var t=e.target,n=t.name,a=t.value;return l((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},n,a))}))};M(null===(e=C.endpoints.login)||void 0===e?void 0:e.useMutation());var I=E.endpoints.login.useMutation(),z=Object(O.a)(I,2),F=z[0],P=z[1].isLoading;return Object(a.jsx)(p.a,{textAlign:"center",fontSize:"xl",children:Object(a.jsx)(m.a,{templateColumns:"repeat(1, 1fr)",gap:9,children:Object(a.jsxs)(p.a,{w:{sm:"95%",md:"50%"},bg:w,shadow:"md",px:{base:5,md:20},py:10,mx:"auto",mt:"10%",children:[Object(a.jsx)(f.a,{fontSize:"3xl",color:S,children:"Login"}),Object(a.jsxs)(g.a,{id:"email",mt:"4",children:[Object(a.jsx)(x.a,{children:"Email address"}),Object(a.jsx)(v.a,{type:"email",name:"email",value:s.email,onChange:T})]}),Object(a.jsxs)(g.a,{id:"password",mt:"5",children:[Object(a.jsx)(x.a,{children:"Password"}),Object(a.jsx)(v.a,{type:"password",name:"password",value:s.password,onChange:T})]}),Object(a.jsx)(k.a,{colorScheme:"teal",mt:10,onClick:function(){F(s).then((function(e){e.error?n({title:"Failed to Authenticate",description:"Incorrect email and password",status:"error",duration:3e3,isClosable:!0}):t("/todo")}))},children:P?"...loading":"Login"}),Object(a.jsx)(f.a,{children:Object(a.jsx)(L.a,{to:"/signup",children:"Sign Up"})})]})})})}}],ce=n(126);function re(){var e=y(),t=e.bg,n=(e.color,e.heading,Object(d.f)().push),c=Object(G.c)(),o=J(U),i=J(_),s=E.endpoints.userDetail.useMutation(),l=Object(O.a)(s,2),u=l[0];l[1].isLoading;Object(r.useEffect)((function(){"SIGNOUT"!==o&&u()}),[o]);return Object(a.jsx)(p.a,{bg:t,p:2,children:Object(a.jsxs)(ce.a,{children:[Object(a.jsx)(K.a,{}),Object(a.jsx)(Q,{justifySelf:"flex-end"}),Object(a.jsx)(f.a,{mx:4,children:i.name}),"SIGNOUT"!==o&&Object(a.jsx)(k.a,{colorScheme:"teal",onClick:function(){c(P()),n("/")},size:"sm",children:"Sign out"})]})})}var oe=Object(u.a)(),ie=function(){return Object(a.jsx)(d.b,{history:oe,children:Object(a.jsxs)(r.Suspense,{fallback:"...Loading",children:[Object(a.jsx)(d.a,{path:"*",component:re}),Object(a.jsx)(d.c,{children:ae.map((function(e,t){return Object(a.jsx)(d.a,{exact:e.exact,path:e.path,component:e.component},t)}))})]})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(r.StrictMode,{children:Object(a.jsxs)(G.a,{store:R,children:[Object(a.jsx)(c.a,{}),Object(a.jsx)(s.a,{theme:l.b,children:Object(a.jsx)(ie,{})})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),se()}},[[103,1,2]]]);
//# sourceMappingURL=main.2e1661d8.chunk.js.map