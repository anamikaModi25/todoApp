(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(122),c=n(0),r=n(34),i=n.n(r),s=n(124),l=n(56),d=n(43),u=n(13),j=n(20),b=n(8),p=n(22),O=n(5),h=n(123),m=n(113),f=n(114),g=n(115),x=n(48),v=n(117),k=n(125),S=n(84),w=n(88),y=function(){return{bg:Object(w.d)("white","black"),color:Object(w.d)("black","white"),heading:Object(w.d)("teal.600","teal.100")}},T=n(62),C=Object(T.a)({reducerPath:"todoApi",baseQuery:Object(T.b)({baseUrl:"https://api-nodejs-todolist.herokuapp.com",prepareHeaders:function(e,t){var n=t.getState,a=""===n().login.token?localStorage.getItem("token"):n().login.token;return a&&e.set("Authorization","Bearer ".concat(a)),e}}),entityTypes:["TODO"],endpoints:function(){return{}}}),L=C;function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Generic Assertion";if(!e)throw new Error("Assertion failed: ".concat(t))}var I=C.injectEndpoints({endpoints:function(e){return{login:e.mutation({query:function(e){return{url:"/user/login",method:"POST",body:e}},invalidates:["TODO"]}),signup:e.mutation({query:function(e){return{url:"/user/register",method:"POST",body:e}}}),userDetail:e.mutation({query:function(){return{url:"/user/me"}}})}}}),E=n(12),F=(Object(E.c)({selectId:function(e){return e.user._id}}),{token:"",user:{name:"",email:"",_id:0}}),z=Object(E.d)({name:"login",initialState:F,reducers:{logout:function(e){e.token="SIGNOUT",e.user=F.user,localStorage.setItem("token","SIGNOUT")}},extraReducers:function(e){e.addMatcher(I.endpoints.login.matchFulfilled,(function(e,t){var n=t.payload;e.token=n.result.token,e.user=n.result.user,localStorage.setItem("token",n.result.token)})).addMatcher(I.endpoints.login.matchRejected,(function(e,t){t.payload})).addMatcher(I.endpoints.userDetail.matchFulfilled,(function(e,t){var n=t.payload;e.user=n.result}))}}),P=z.actions.logout,A=z.reducer,U=function(e){return e.login.user},_=function(e){return""!==e.login.token?e.login.token:function(){var e=localStorage.getItem("token");return e&&"SIGNOUT"!==e?e:"SIGNOUT"}()},N=n(85),G=L.injectEndpoints({endpoints:function(e){return{getTask:e.mutation({query:function(){return{url:"/task"}}}),addTask:e.mutation({query:function(e){return{url:"/task",method:"POST",body:e}}}),updateTask:e.mutation({query:function(e){var t=e._id,n=Object(N.a)(e,["_id"]);return{url:"/task/".concat(t),method:"PUT",body:n}}}),deleteTask:e.mutation({query:function(e){var t=e._id;return{url:"/task/".concat(t),method:"DELETE"}}})}}}),q=Object(E.d)({name:"login",initialState:{count:0,data:[]},reducers:{},extraReducers:function(e){e.addMatcher(G.endpoints.getTask.matchFulfilled,(function(e,t){var n=t.payload;e.data=n.result.data,e.count=n.result.count})).addMatcher(G.endpoints.addTask.matchFulfilled,(function(e,t){var n=t.payload;e.data.push(n.result.data)})).addMatcher(G.endpoints.updateTask.matchFulfilled,(function(e,t){var n=t.payload,a=e.data.findIndex((function(e){return e._id===n.result.data._id}));a>-1&&(e.data[a]=n.result.data)})).addMatcher(G.endpoints.deleteTask.matchFulfilled,(function(e,t){var n=t.payload;console.log(n)}))}}).reducer,D=function(e){return e.task.data},B=n(18),R=function(e){var t;return Object(E.a)(Object(p.a)({reducer:(t={},Object(b.a)(t,L.reducerPath,L.reducer),Object(b.a)(t,"login",A),Object(b.a)(t,"task",q),t),middleware:function(e){return e().concat(L.middleware)}},e))}(),J=B.d;var W=n(119),H=n(118),Q=n(120);function X(){var e=y(),t=(e.bg,e.color,e.heading),n=(J(_),Object(h.a)()),o=G.endpoints.addTask.useMutation(),r=Object(O.a)(o,2),i=r[0],s=r[1].isLoading,l=Object(c.useState)({description:""}),d=Object(O.a)(l,2),u=d[0],j=d[1];return Object(a.jsxs)(m.a,{p:{base:5,md:9},children:[Object(a.jsx)(g.a,{fontSize:"3xl",color:t,children:"Add Task"}),Object(a.jsxs)(H.a,{children:[Object(a.jsxs)(x.a,{id:"email",mt:"4",children:[Object(a.jsx)(v.a,{children:"Task Name"}),Object(a.jsx)(k.a,{type:"email",name:"description",value:u.description,onChange:function(e){var t=e.target,n=t.name,a=t.value;return j((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(b.a)({},n,a))}))}})]}),Object(a.jsx)(S.a,{colorScheme:"teal",mt:12,mx:{base:2,md:10},onClick:function(){i(u).then((function(e){e.error?n({title:"Failed to Add task",status:"error",duration:3e3,isClosable:!0}):(j({description:""}),n({title:"Task Added",status:"success",duration:3e3,isClosable:!0}))}))},children:s?"...loading":"Add"})]})]})}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var V=c.createElement("g",null,c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#FF4141",d:"M61.44,0c33.933,0,61.439,27.507,61.439,61.439 s-27.506,61.439-61.439,61.439C27.507,122.879,0,95.372,0,61.439S27.507,0,61.44,0L61.44,0z M73.451,39.151 c2.75-2.793,7.221-2.805,9.986-0.027c2.764,2.776,2.775,7.292,0.027,10.083L71.4,61.445l12.076,12.249 c2.729,2.77,2.689,7.257-0.08,10.022c-2.773,2.765-7.23,2.758-9.955-0.013L61.446,71.54L49.428,83.728 c-2.75,2.793-7.22,2.805-9.986,0.027c-2.763-2.776-2.776-7.293-0.027-10.084L51.48,61.434L39.403,49.185 c-2.728-2.769-2.689-7.256,0.082-10.022c2.772-2.765,7.229-2.758,9.953,0.013l11.997,12.165L73.451,39.151L73.451,39.151z"}));function Y(e,t){var n=e.title,a=e.titleId,o=K(e,["title","titleId"]);return c.createElement("svg",$({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25.879px",height:"25.879px",viewBox:"0 0 122.879 122.879",enableBackground:"new 0 0 122.879 122.879",xmlSpace:"preserve",ref:t,"aria-labelledby":a},o),n?c.createElement("title",{id:a},n):null,V)}var Z=c.forwardRef(Y);n.p;var ee=[{path:"/todoapp/signup",exact:!0,component:function(){var e,t=Object(u.f)().push,n=Object(h.a)(),o=Object(c.useState)({name:"",email:"",password:"",age:0}),r=Object(O.a)(o,2),i=r[0],s=r[1],l=y(),d=l.bg,j=(l.color,l.heading),w=function(e){var t=e.target,n=t.name,a=t.value;return s((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(b.a)({},n,a))}))};M(null===(e=L.endpoints.login)||void 0===e?void 0:e.useMutation());var T=I.endpoints.signup.useMutation(),C=Object(O.a)(T,2),E=C[0];return C[1].isLoading,Object(a.jsx)(m.a,{textAlign:"center",fontSize:"xl",children:Object(a.jsx)(f.a,{templateColumns:"repeat(1, 1fr)",gap:5,children:Object(a.jsxs)(m.a,{w:{sm:"98%",md:"50%"},bg:d,shadow:"md",px:{base:10,md:20},py:10,mx:"auto",mt:"10%",children:[Object(a.jsx)(g.a,{fontSize:"3xl",color:j,children:"SignUp"}),Object(a.jsxs)(x.a,{id:"name",mt:"4",children:[Object(a.jsx)(v.a,{children:"Name"}),Object(a.jsx)(k.a,{type:"text",name:"name",value:i.name,onChange:w})]}),Object(a.jsxs)(x.a,{id:"email",mt:"4",children:[Object(a.jsx)(v.a,{children:"Email address"}),Object(a.jsx)(k.a,{type:"email",name:"email",value:i.email,onChange:w})]}),Object(a.jsxs)(x.a,{id:"password",mt:"5",children:[Object(a.jsx)(v.a,{children:"Password"}),Object(a.jsx)(k.a,{type:"password",name:"password",value:i.password,onChange:w})]}),Object(a.jsxs)(x.a,{id:"age",mt:"4",children:[Object(a.jsx)(v.a,{children:"Age"}),Object(a.jsx)(k.a,{type:"number",name:"age",value:i.age,onChange:w})]}),Object(a.jsx)(S.a,{colorScheme:"teal",mt:10,onClick:function(){E(i).then((function(e){e.error?n({title:"Failed to Signup",status:"error",duration:3e3,isClosable:!0}):t("/todoapp")}))},children:"Sign Up"})]})})})}},{path:"/todoapp/todo",exact:!0,component:function(){var e=y(),t=(e.bg,e.color,e.heading,J(_)),n=J(D),o=G.endpoints.getTask.useMutation(),r=Object(O.a)(o,2),i=r[0],s=(r[1].isLoading,G.endpoints.updateTask.useMutation()),l=Object(O.a)(s,2),d=l[0],u=(l[1].isLoading,G.endpoints.deleteTask.useMutation()),j=Object(O.a)(u,1)[0];return Object(c.useEffect)((function(){i()}),[t]),Object(a.jsx)(m.a,{fontSize:"xl",children:Object(a.jsxs)(m.a,{fontSize:"m",children:[Object(a.jsx)(X,{}),Object(a.jsx)(f.a,{templateColumns:"repeat(5, 1fr)",children:Object(a.jsx)(f.b,{colSpan:{base:5,md:3},p:9,children:Object(a.jsx)(W.a,{spacing:3,children:n.map((function(e,t){return Object(a.jsx)(W.b,{children:Object(a.jsxs)(H.a,{children:[Object(a.jsx)(g.a,{children:e.description}),Object(a.jsx)(Q.a,{}),Object(a.jsx)(S.a,{colorScheme:"teal",size:"xs",onClick:function(){return t=e._id,n=!e.completed,void d({_id:t,completed:n});var t,n},children:e.completed?"Completed":"Complete"}),Object(a.jsx)(m.a,{px:2,onClick:function(){return t=e._id,void j({_id:t}).then((function(){return i()}));var t},cursor:"pointer",children:Object(a.jsx)(Z,{})})]})},t)}))})})})]})})}},{path:"/todoapp",exact:!0,component:function(){var e,t=Object(u.f)().push,n=Object(h.a)(),o=J(_),r=Object(c.useState)({email:"",password:""}),i=Object(O.a)(r,2),s=i[0],l=i[1],j=y(),w=j.bg,T=(j.color,j.heading);Object(c.useEffect)((function(){"SIGNOUT"!==o&&t("/todoapp/todo")}),[o]);var C=function(e){var t=e.target,n=t.name,a=t.value;return l((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(b.a)({},n,a))}))};M(null===(e=L.endpoints.login)||void 0===e?void 0:e.useMutation());var E=I.endpoints.login.useMutation(),F=Object(O.a)(E,2),z=F[0],P=F[1].isLoading;return console.log(o),Object(a.jsx)(m.a,{textAlign:"center",fontSize:"xl",children:Object(a.jsx)(f.a,{templateColumns:"repeat(1, 1fr)",gap:9,children:Object(a.jsxs)(m.a,{w:{sm:"95%",md:"50%"},bg:w,shadow:"md",px:{base:5,md:20},py:10,mx:"auto",mt:"10%",children:[Object(a.jsx)(g.a,{fontSize:"3xl",color:T,children:"Login"}),Object(a.jsxs)(x.a,{id:"email",mt:"4",children:[Object(a.jsx)(v.a,{children:"Email address"}),Object(a.jsx)(k.a,{type:"email",name:"email",value:s.email,onChange:C})]}),Object(a.jsxs)(x.a,{id:"password",mt:"5",children:[Object(a.jsx)(v.a,{children:"Password"}),Object(a.jsx)(k.a,{type:"password",name:"password",value:s.password,onChange:C})]}),Object(a.jsx)(S.a,{colorScheme:"teal",mt:10,onClick:function(){z(s).then((function(e){e.error?n({title:"Failed to Authenticate",description:"Incorrect email and password",status:"error",duration:3e3,isClosable:!0}):t("/todoapp/todo")}))},children:P?"...loading":"Login"}),Object(a.jsx)(g.a,{children:Object(a.jsx)(d.b,{to:"/todoapp/signup",children:"Sign Up"})})]})})})}}],te=n(126),ne=n(121),ae=n(66),oe=function(e){var t=Object(w.c)().toggleColorMode,n=Object(w.d)("dark","light"),o=Object(w.d)(ae.a,ae.b);return Object(a.jsx)(ne.a,Object(p.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(a.jsx)(o,{}),"aria-label":"Switch to ".concat(n," mode")},e))};function ce(){var e=y(),t=e.bg,n=(e.color,e.heading,Object(u.f)().push),o=Object(B.c)(),r=J(_),i=J(U),s=I.endpoints.userDetail.useMutation(),l=Object(O.a)(s,2),d=l[0];l[1].isLoading;Object(c.useEffect)((function(){"SIGNOUT"!==r&&d()}),[r]);return Object(a.jsx)(m.a,{bg:t,p:2,children:Object(a.jsxs)(te.a,{children:[Object(a.jsx)(Q.a,{}),Object(a.jsx)(oe,{justifySelf:"flex-end"}),Object(a.jsx)(g.a,{mx:4,children:i.name}),"SIGNOUT"!==r&&Object(a.jsx)(S.a,{colorScheme:"teal",onClick:function(){o(P()),n("/todoapp")},size:"sm",children:"Sign out"})]})})}Object(j.a)();var re=function(){return Object(a.jsx)(d.a,{children:Object(a.jsxs)(c.Suspense,{fallback:"...Loading",children:[Object(a.jsx)(u.a,{path:"*",component:ce}),Object(a.jsx)(u.c,{children:ee.map((function(e,t){return Object(a.jsx)(u.a,{exact:e.exact,path:e.path,component:e.component},t)}))})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(c.StrictMode,{children:Object(a.jsxs)(B.a,{store:R,children:[Object(a.jsx)(o.a,{}),Object(a.jsx)(s.a,{theme:l.b,children:Object(a.jsx)(re,{})})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ie()}},[[103,1,2]]]);
//# sourceMappingURL=main.c9c40cd4.chunk.js.map